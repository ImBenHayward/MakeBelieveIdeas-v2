"use strict";(()=>{var N=new MasterPlan(document.getElementById("masterplan"),{clientID:"5140",jobID:"2000",theme:"light",embedType:"frame",thumbWidth:"300",autoFullscreen:!0,showLoginLink:!1,clientNameLink:!1,showSpreadNums:!1,customCss:{nestedToc:!0}});window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{let n=1,d="",r="",s=d+"-"+r,c="",l="",b="",L="",O="",v="";window.onload=function(){document.getElementsByTagName("html")[0].style.visibility="visible",u("#step-1-button"),y();function e(t){let{length:i}=$(t);return Math.floor(Math.random()*i)}if(localStorage.getItem("rowId")===null){let t=e('input[name="hair-colour"]'),i=e('input[name="hair-style"]'),o=e('input[name="Eye-Colour"]'),E=e('input[name="skin-tone"]');$('input[name="hair-colour"]').eq(t).prop("checked",!0),$('input[name="hair-style"]').eq(i).prop("checked",!0),$('input[name="Eye-Colour"]').eq(o).prop("checked",!0),$('input[name="skin-tone"]').eq(E).prop("checked",!0),m(),p(),f(),a()}else S.then(t=>{let i=t.fields.HAIR.split("-");$("input[value="+i[1]+"]").prop("checked",!0),$("input[value="+t.fields.HAIR+"]").prop("checked",!0),$("input[value="+t.fields.EYES+"]").prop("checked",!0),$("input[value="+t.fields.SKIN+"]").prop("checked",!0),m(),p(),f(),a()})},$(".memberstack-button").click(function(e){e.preventDefault()}),MemberStack.onReady.then(function(e){e.loggedIn&&(b=e.id)}),$("#step-1-button").click(function(e){e.preventDefault(),u("#step-1-button"),$(".form-step-1-container").fadeIn("slow"),$(".form-step-"+n+"-container").css({display:"none"}),n=1}),$("#step-2-button").click(function(e){e.preventDefault(),u("#step-2-button"),$(".form-step-2-container").fadeIn("slow"),$(".form-step-"+n+"-container").css({display:"none"}),n=2}),$("#step-3-button").click(function(e){e.preventDefault(),u("#step-3-button"),$(".form-step-3-container").fadeIn("slow"),$(".form-step-"+n+"-container").css({display:"none"}),n=3}),$('input[name="hair-colour"]').change(function(e){p(),f(),h(),a()}),$("input[name=hair-style]").change(function(e){m(),h(),a()}),$("input[name=Eye-Colour]").change(function(e){c=$("input[name=Eye-Colour]:checked","#character-creation-form").val().toLowerCase(),a()}),$("input[name=skin-tone]").change(function(e){l=$("input[name=skin-tone]:checked","#character-creation-form").val().toLowerCase(),a()});function a(){if(s)$(".hair:visible").first().hide(),$("."+s).show();else{let{length:e}=$(".hair-container img"),t=Math.floor(Math.random()*e);$(".hair-container img").eq(t).show()}if(c)$(".eyes:visible").first().hide(),$("."+c).show();else{let{length:e}=$(".eyes-container img"),t=Math.floor(Math.random()*e);$(".eyes-container img").eq(t).show()}if(l)$(".skin:visible").first().hide(),$("."+l).show();else{let{length:e}=$(".skin-container img"),t=Math.floor(Math.random()*e);$(".skin-container img").eq(t).show()}}function y(){$('input[name="hair-colour"]').each(function(){let e=$(this).closest("label").find("span").html();$(this).val(e)}),$('input[name="hair-style"]').each(function(){let e=$(this).closest("label").find("span").html();$(this).val(e)}),$('input[name="Eye-Colour"]').each(function(){let e=$(this).closest("label").find("span").html();$(this).val(e)}),$('input[name="skin-tone"]').each(function(){let e=$(this).closest("label").find("span").html();$(this).val(e)})}function u(e){$("#step-"+n+"-button").prop("disabled",!1).removeClass("selected-form-step"),$(e).prop("disabled",!0).addClass("selected-form-step")}function p(){r=$("input[name=hair-colour]:checked","#character-creation-form").val().toLowerCase(),$("input[name=hair-style]").each(function(e){let t=$(this).val().substring(6).toLowerCase();$(this).closest("div").addClass("hairstyle-"+e),t!=r&&$(".hairstyle-"+e).hide(),t==r&&$(".hairstyle-"+e).show()})}function h(){s=d+"-"+r.toLowerCase()}function f(){h(),$('input[value="'+s+'"]').prop("checked",!0)}function m(){d=$("input[name=hair-style]:checked","#character-creation-form").val().slice(0,5),c=$("input[name=Eye-Colour]:checked","#character-creation-form").val().toLowerCase(),l=$("input[name=skin-tone]:checked","#character-creation-form").val().toLowerCase()}$(".pick-a-book").click(function(e){e.preventDefault(),$(".character-builder-container").hide(),$(".book-selector-container").show()}),$(".edit-character").click(function(e){e.preventDefault(),$(".character-builder-container").show(),$(".book-selector-container").hide()}),$(".book-item").each(function(){let e=$(this).closest("div").find(".text-block-2").html().toLowerCase().replace(/ /g,"-");$(this).prop("id",e)}),$(".book-item").click(function(e){e.preventDefault(),v=$(this).prop("id"),$(".generate-book-preview").prop("text","Generate Preview For "+v),$(".generate-book-preview").show()}),$(".generate-book-preview").click(function(e){e.preventDefault(),w(),D(),$(".book-preview-container").show(),$(".book-selector-container").hide()}),$(".edit-character-2").click(function(e){e.preventDefault(),$(".book-preview-container").hide(),$(".character-builder-container").show()}),$(".select-story").click(function(e){e.preventDefault(),$(".book-preview-container").hide(),$(".book-selector-container").show()});function g(){return localStorage.getItem("sessionId")}function w(){if(g()===null){let e=uuidv4();localStorage.setItem("sessionId",e)}}function H(){return!1}let I=localStorage.getItem("rowId"),k=new Headers;k.append("Content-Type","application/json");let C={method:"get",headers:k,redirect:"follow"},S=fetch("https://v1.nocodeapi.com/makebelieveme/airtable/nmeOnHAeFloOUpCL?tableName=Sessions&id="+I,C).then(e=>e.json()).then(e=>e).catch(e=>console.log("error",e));function D(){let e=[{BOOK:"03",PRONOUNS:"HE",Orderer:["reckIOlQZHkavukIi"],"Order Status":"Chosen",HAIR:s,EYES:c,SKIN:l,SESSION_ID:localStorage.getItem("sessionId")}],t=new Headers;t.append("Content-Type","application/json");let i={method:"post",headers:t,redirect:"follow",body:JSON.stringify(e)};fetch("https://v1.nocodeapi.com/makebelieveme/airtable/nmeOnHAeFloOUpCL?tableName=Sessions",i).then(o=>o.json()).then(o=>localStorage.setItem("rowId",o==null?void 0:o[0].id)).catch(o=>console.log("error",o))}});})();
